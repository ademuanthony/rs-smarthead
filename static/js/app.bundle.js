!function(l){function t(t){for(var e,n,r=t[0],i=t[1],a=t[2],s=0,o=[];s<r.length;s++)n=r[s],Object.prototype.hasOwnProperty.call(u,n)&&u[n]&&o.push(u[n][0]),u[n]=0;for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(l[e]=i[e]);for(f&&f(t);o.length;)o.shift()();return d.push.apply(d,a||[]),c()}function c(){for(var t,e=0;e<d.length;e++){for(var n=d[e],r=!0,i=1;i<n.length;i++){var a=n[i];0!==u[a]&&(r=!1)}r&&(d.splice(e--,1),t=s(s.s=n[0]))}return t}var n={},u={0:0},d=[];function s(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return l[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=l,s.c=n,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/static/js/";var e=window.webpackJsonp=window.webpackJsonp||[],r=e.push.bind(e);e.push=t,e=e.slice();for(var i=0;i<e.length;i++)t(e[i]);var f=r;d.push([30,1]),c()}({30:function(t,e,n){"use strict";n.r(e);var r=n(6),i=n(29),a=(n(31),n(34),r.a.start()),s=n(36);a.load(Object(i.a)(s))},31:function(t,e,n){var r=n(32);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(20)(r,i);r.locals&&(t.exports=r.locals)},32:function(t,e,n){(t.exports=n(19)(!1)).push([t.i,".body-block{font-size:5px}\n",""])},34:function(t,e,n){var r=n(35);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(20)(r,i);r.locals&&(t.exports=r.locals)},35:function(t,e,n){(t.exports=n(19)(!1)).push([t.i,'.tile{width:100%;display:inline-block;box-sizing:border-box;background:#fff;padding:20px;margin-bottom:10px}.tile .title{margin-top:0}.tile p,.tile span,.tile a,.tile ul,.tile li,.tile button{font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit}.tile h1,.tile h2,.tile h3,.tile h4,.tile h5,.tile h6{font-family:"Open Sans","Segoe UI",Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;line-height:1.5em;font-weight:300}.tile strong{font-weight:400}.tile.purple,.tile.blue,.tile.red,.tile.orange,.tile.green{color:#fff}.tile.gray{background:#eee;color:black}.tile.gray:hover{background:#e1e1e1}.tile.purple{background:#5133ab}.tile.purple:hover{background:#3e2784}.tile.red{background:#ac193d}.tile.red:hover{background:#7f132d}.tile.green{background:#00a600}.tile.green:hover{background:#007300}.tile.blue{background:#2672ec}.tile.blue:hover{background:#125acd}.tile.orange{background:#dc572e}.tile.orange:hover{background:#b8431f}\n',""])},36:function(t,e,n){var r={"./layout_controller.js":37,"./payment_controller.js":59};function i(t){var e=a(t);return n(e)}function a(t){if(n.o(r,t))return r[t];var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return Object.keys(r)},i.resolve=a,(t.exports=i).id=36},37:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return g});var r=n(9),s=n.n(r),i=n(10),o=n.n(i),a=n(11),l=n.n(a),c=n(12),u=n.n(c),d=n(4),f=n.n(d),h=n(13),p=n.n(h),b=n(7),v=n.n(b),g=function(t){function a(){var t,e;s()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=l()(this,(t=u()(a)).call.apply(t,[this].concat(r))),v()(f()(e),"navbarIsOpened",void 0),e}return p()(a,t),o()(a,[{key:"toggleNavbar",value:function(){this.navbarIsOpened?$(this.navbarTarget).slideUp():$(this.navbarTarget).slideDown(),this.navbarIsOpened=!this.navbarIsOpened}}],[{key:"targets",get:function(){return["navbar"]}}]),a}(n(6).b)},59:function(t,e,n){"use strict";n.r(e);var r=n(8),o=n.n(r),i=n(17),l=n.n(i),a=n(9),s=n.n(a),c=n(10),u=n.n(c),d=n(11),f=n.n(d),h=n(12),p=n.n(h),b=n(4),v=n.n(b),g=n(13),y=n.n(g),m=n(7),T=n.n(m),w=n(6),k=n(18),x=n.n(k),j=function(t){t.classList.add("d-none"),t.classList.add("d-hide")},_=function(t){t.classList.remove("d-none"),t.classList.remove("d-hide")};var O=n(81);n.d(e,"default",function(){return L});var L=function(t){function a(){var t,e;s()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=f()(this,(t=p()(a)).call.apply(t,[this].concat(r))),T()(v()(e),"list",void 0),T()(v()(e),"subjects",void 0),T()(v()(e),"classes",void 0),e}var e;return y()(a,t),u()(a,[{key:"connect",value:function(){this.list=[],this.classes=[],this.subjects=[];var e=this;Array.prototype.forEach.call(this.subjectTarget.options,function(t){""!==t.value&&e.subjects.push({id:t.value,label:t.innerText})}),Array.prototype.forEach.call(this.classTarget.options,function(t){""!==t.value&&e.classes.push({id:t.value,label:t.innerText})})}},{key:"addToList",value:function(){var t=this.subjectTarget.value,e=this.classTarget.value;if(""!==t&&""!==e){var n=t+e;O.a.find(this.list,function(t){return t.id===n})?window.alert("Select subject exists for the specified period and class"):(this.list.push({id:n,subject_id:t,class_id:e,subject:this.subjectTarget.options[this.subjectTarget.selectedIndex].innerText,className:this.classTarget.options[this.classTarget.selectedIndex].innerText}),this.displayList(),this.subjectTarget.value="",this.classTarget.value="")}else window.alert("Subject, period amd class are required")}},{key:"removeFromList",value:function(t){var e=t.currentTarget.getAttribute("data-id");O.a.remove(this.list,function(t){return t.id===e}),this.displayList()}},{key:"displayList",value:function(){var i=this;this.listTblTarget.innerHTML="",this.cartTotal=0,this.list.forEach(function(t,e){var n=document.importNode(i.itemTemplateTarget.content,!0),r=n.querySelectorAll("td");r[0].innerText=e+1,r[1].innerText=t.className,r[2].innerText=t.subject,r[3].innerHTML='<button data-action="click->payment#removeFromList" data-id="'.concat(t.id,'">Remove</button>'),i.listTblTarget.appendChild(n)});var t=this.list.length;if(5<=t){var e=(t-t%5)/5;this.cartTotal=15e3*e,t-=5*e}if(3<=t){var n=(t-t%3)/3;this.cartTotal+=12e3*n,t-=3*n}this.cartTotal+=5e3*t,this.cartTotalTarget.textContent=this.cartTotal;var r=5e3*this.list.length-this.cartTotal,a=100*r/this.cartTotal;this.savingsTarget.textContent="".concat(r," (").concat(a.toFixed(0),"%)"),(0<this.list.length?_:j)(this.cartItemDivTarget)}},{key:"subscribe",value:(e=l()(o.a.mark(function t(){var e,s,n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this.list.length)return window.alert("Please add a subject, period amd class to continue"),t.abrupt("return");t.next=3;break;case 3:if(this.loading)return t.abrupt("return");t.next=5;break;case 5:return this.loading=!0,e={count:this.list.length,subject_id:this.list[0].subject_id,class_id:this.list[0].class_id},s=this,t.next=10,x.a.post("/payments/initiate",e);case 10:if(n=t.sent,(r=n.data).error)return window.alert(r.error),s.loading=!1,t.abrupt("return");t.next=16;break;case 16:PaystackPop.setup({key:"pk_live_a669ccbde1c4d5509b6565af1131f87ea1af5ab6",email:r.student.parent_email,amount:r.amount,currency:"NGN",ref:r.id,metadata:{custom_fields:[{display_name:"Mobile Number",variable_name:"mobile_number",value:r.student.parent_phone}]},callback:function(){var e=l()(o.a.mark(function t(e){var n,r,i,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],r=0;r<s.list.length;r++)n.push({subject_id:s.list[r].subject_id,class_id:s.list[r].class_id});return t.next=4,x.a.post("/payments/".concat(e.reference,"/update-status"),{items:n});case 4:i=t.sent,(a=i.data).error&&(s.loading=!1,window.alert(a.error)),window.alert("Success. Subscription successful, check the subscription table for your lesson' start date"),window.location.reload();case 9:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),onClose:function(){s.loading=!1,window.alert("window closed")}}).openIframe();case 18:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})}],[{key:"targets",get:function(){return["class","subject","cartItemDiv","listTbl","itemTemplate","cartTotal","savings"]}}]),a}(w.b)}});
//# sourceMappingURL=app.bundle.js.map